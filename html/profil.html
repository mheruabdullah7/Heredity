<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil Siswa</title>

    <link rel="icon" type="image/png" href="/img/iconWebsite.svg">

    <!-- Jquery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js" charset="UTF-8"></script>


    <!-- Bootstrap CSS only -->
    <link   rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
            integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" 
            crossorigin="anonymous">

    <!-- Font Awesome CSS -->
    <link   rel="stylesheet" 
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"
            integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A=="
            crossorigin="anonymous" 
            referrerpolicy="no-referrer" />

    <!-- Cropping  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.css">


    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.js" integrity="sha512-LjPH94gotDTvKhoxqvR5xR2Nur8vO5RKelQmG52jlZo7SwI5WLYwDInPn1n8H9tR0zYqTqfNxWszUEy93cHHwg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- Encription PW -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <!-- css -->
   <link href="/css/profil.css" rel="stylesheet">
</head>

<body>
     <!-- HEADER START -->
     <header class="shadow sticky-top" style="background:#353ba7">
        
        <div class="container d-flex flex-wrap justify-content-between py-3 text-light">
            <div>
                Selamat datang <span id="namaSiswa"></span> di halaman profil
            </div>

            <div>
                <a href="#" class="link-light text-decoration-none fw-bold ms-2" onclick="goBack()">
                    <i class="fa-sharp fa-solid fa-circle-left"></i>
                    Kembali
                </a>
            </div>

        </div>

    </header>
    

    <section class="mt-2">
        
        <!-- .container start -->
        <div class="container py-5">
            
            <!-- .row start -->
            <div class="row">

                <!-- .col start -->
                <div class="col-lg-4 mb-5">

                    <div class="card text-center p-5">

                        <div class="card-body dropup">

                             <!-- <img id="imgProfile" src="/img/profile.png" 
                            alt="Gambar Profil"  class="dropdown-toggle img img-thumbnail rounded-circle w-50 h-50 object-fit-cover" data-bs-toggle="dropdown" data-bs-target="#dropdownMenu" aria-haspopup="true" aria-expanded="false">

                            Dropdown
                            <ul class="dropdown-menu text-center" id="dropdownMenu">
                                <li>
                                    <button type="button" class="dropdown-item" data-bs-toggle="modal" data-bs-target="#gambarProfileModal">
                                        Liat Gambar
                                    </button>
                                </li>
                                <li>
                                    <button type="button" class="dropdown-item" data-bs-toggle="modal" data-bs-target="#modalUploadGambar">
                                        Upload Gambar
                                    </button>
                                </li>
                            </ul>
                         -->
                            <h2 class="text-capitalize" id="namaSiswaProfil"></h2>

                            <div>
                                <div class="card-text text-muted">
                                    NISN: <span id="nisnSiswa"></span>
                                </div>
                                <div class="card-text text-muted">
                                    Kelas: <span id="kelasSiswa"></span>
                                </div>
                            </div>
                            <button class="edit btn btn-success btn-sm mt-3" data-bs-toggle="modal" data-bs-target="#editData" id="editSiswa">
                                <i class="fa-solid fa-pencil me-1"></i> Ubah Profil
                            </button>

                        </div>

                    </div>

                </div>
                <!-- .col end -->

                <!-- .col start -->
                <div class="col-lg-8">
                    
                    <!-- <div class="shadow border rounded p-5 mb-5">
                        <h2>Informasi Skor Latihan</h2>
                        <ul>
                            <li>
                                Latihan 1: <span id="latihan1"></span>
                            </li>
                            <li>
                                Latihan 2: <span id="latihan2"></span>
                            </li>
                            <li>
                                Latihan 3: <span id="latihan3"></span>
                            </li>
                            <li>
                                Latihan 4: <span id="latihan4"></span>
                            </li>
                            <li>
                                Latihan 5: <span id="latihan5"></span>
                            </li>
                            <li>
                                Latihan 6: <span id="latihan6"></span>
                            </li>
                        </ul>
                    </div> -->

                    <div class="shadow border rounded p-5 mb-5">
                        <h2>Informasi Skor Kuis</h2>
                        <ul>
                            <li>
                                Kuis 1: <span id="kuis1"></span>
                            </li>
                            <li>
                                Kuis 2: <span id="kuis2"></span>
                            </li>
                            <!-- <li>
                                Kuis 3: <span id="kuis3"></span>
                            </li> -->
                        </ul>
                    </div>

                    <div class="shadow border rounded p-5 mb-5">
                        <h2>Informasi Skor Evaluasi</h2>
                        <h3 id="skorEvaluasi"></h3>
                    </div>
                    
                </div>
                <!-- .col end -->

            </div>
            <!-- .row end -->

        </div>
        <!-- .container end -->

    </section>
</body>

<script src="//cdn.jsdelivr.net/npm/sweetalert2@10"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>

<script type="module" src="/js/dbProfil.js"></script>

<script type="module" src="/js/db/uploadImage.js"></script>

<script src="https://www.gstatic.com/firebasejs/6.0.2/firebase.js"></script>

<!-- croppie -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.min.js"></script>

<!-- <link  href="/path/to/cropper.css" rel="stylesheet">
<script src="/path/to/cropper.js"></script> -->

<script>
    let nama = localStorage.getItem('nama');
   

    menampilkanIdentitas();

    // Functions
    function goBack() {
        window.history.back();
    }

    function menampilkanIdentitas(){
    
    if(nama == null ){
        Swal.fire({
            icon: 'error',
            title: 'Mohon Maaf',
            text: 'Kamu Harus Login Terlebih dahulu!',
        })
        .then(()=>{
        document.location.href  = "../../index.html";
        })
    }
    }

    $('#dropdownMenu').click(function(){
        $('.awal').prop('hidden', false);
        
    })


    // var fileText = document.querySelector(".fileText");
    // var uploadPercentage = document.querySelector(".uploadPercentage");
    // var progres = document.querySelector(".progres");
    // var percentVal;
    // var fileItem;
    // var fileName;


    // function getFile(event) {
    //     fileItem = event.target.files[0];
    //     fileName = fileItem.name;
    //     $('.fileText').html(fileName)
    //     // fileText.innerHTML = fileName;
    //     console.log(fileName); // melakukan sesuatu dengan file yang dipilih
    // }

    // function getFile(e){
    // fileItem = e.target.file[0];
    // fileName = fileItem.nama;
    // fileText.innerHTML = fileName;
    // }

</script>

<!-- Modal -->
<div id="editData" class="modal fade" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Data Siswa</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="popup update">
            <form action="">

                <input type="text" placeholder="Nama Siswa" name="namaEdit" class="form-control mb-3" />
                <input type="text" placeholder="NISN" name="nisnEdit" class="form-control mb-3" disabled aria-label="Close" />
                <select id="kelasEdit" class="form-select mb-3" name="kelasEdit" aria-placeholder="Pilih Kelas">
                    <option selected hidden>Pilih Kelas</option>
                </select>
        
                <!-- Tambahkan ikon mata (eye) dari Font Awesome pada elemen input -->
                <div class="form-group">
                    <label for="password">Kata Sandi</label>
                    <div class="input-group">
                        <input type="password" placeholder="Password" name="passEdit" class="form-control mb-3" id="passwordSiswa"/>

                        <div class="input-group-append " id="showPasswordBtn">
                            <button class="btn btn-outline-secondary" type="button" >
                            <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                </div>
  
                <div class="modal-footer">
                    <button id="keluar" type="button" class="keluar btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                    <button type="submit" id="submit2" class="btn btn-primary">Kirim</button>
                </div>
            </form>
          </div>
        </div>
      </div>
    </div>
</div>

<!-- Upload Gambar -->
 <div class="modal fade" id="modalUploadGambar" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Upload Gambar</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <center>
                <input 
                    type="file"
                    class="inputFile"
                    id="fileInp"
                    accept="image/png, image/jpeg"
                />

                <div class="awal">
                    <label for="fileInp" class="labelUpload">+</label>
                    <span class="fileText"></span>
    
                    <div id="previewContainer"></div>
                    <button id="uploadImage">Upload Image</button>
                </div>

                <div class="barr">
                    <div class="progres"></div>
                </div>

                <div class="uploadPercentage">0%</div>

                <div class="imageUploaded">
                    <img src="/img/profile.png">
                </div>
            </center>
        </div>
      </div>
    </div>
</div>


<!-- Modal Lihat Gambar-->

<div class="modal fade" id="gambarProfileModal" tabindex="-1" aria-labelledby="gambarProfileModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="gambar modal-content">
        <div class="modal-header">
            
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body overflow-hidden">
            <center>
            <figure class="figure">
                <img src="/img/profile.png" class="figure-img rounded" alt="..." style="width: 100%; height: 100%;"/>
            </figure>
            </center>
        </div>
        </div>
    </div>
</div>
<!-- Akhir modal -->
</html>